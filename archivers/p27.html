<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>wordpress定时任务之一:利用wp-crontrol控制WP-Cron任务 - Powered by dhblog.org</title>
<meta name="keywords" content="wordpress定时任务之一:利用wp-crontrol控制WP-Cron任务" />
<meta name="description" content="wordpress定时任务之一:利用wp-crontrol控制WP-Cron任务,静态页面,Powered by dhblog.org" />
<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
<div id="wrapper">
<div id="nav">
<ul><li><a href="p19.html" title="给我留言">给我留言</a></li>
<li><a href="p20.html" title="友情链接">友情链接</a></li>
<li><a href="p21.html" title="关于本站">关于本站</a></li>
<li><a href="p22.html" title="本站下载">本站下载</a></li>
<li><a href="p39.html" title="google搜索结果">google搜索结果</a></li>
</ul>
</div>
<div id="top">
<div id="dhtitle">DH 博客的文章归档</div>
<center>DH出品，必属精品！</center>
  <div style="text-align:right;">
	<a href="http://dhblog.org">原始版本</a>
  </div>  
</div><div id="nav">
<a href="http://dhblog.org/archivers/"><strong>DH 博客</strong></a>  &raquo; <a href="http://dhblog.org/archivers/cat125-1.html">wordpress</a>  &raquo; wordpress定时任务之一:利用wp-crontrol控制WP-Cron任务
| <a href="http://dhblog.org/27.html"><strong>查看此文章的完整的版本</strong></a>
</div>
<div id="content">
<div id="post_content">
<div id="post_title">wordpress定时任务之一:利用wp-crontrol控制WP-Cron任务</div>
<div id="post_author">2011-05-11 22:19:25</div>
<div>
<strong>1. WP-Cron简介</strong>
我要定时发邮件！我要定时清理数据库！我要定时备份！我们怎么在wordpress之中执行定时任务呢？
本文介绍第一种方法，实用WP-Cron，用插件wp-crontrol来控制WP-Cron。
Scott Merrill 曾在2005年开发过一个插件叫做 wp-cron 的插件。在 WordPress 2.0 发布之后，在 wp-hachers 邮件列表有个关于在 WordPress 核心代码中添加 cron 类型的时序安排特性的讨论，最后这个特性在 2.1 版本中成形,被WordPress采用。wp-cron并不是打算去取代 Linux 操作系统内建的真正的 Cron 特性，也达不到那种精确。它所提供的是允许插件开发者能够定义事件发生在特定的时间内通过页面被导入的时候，检测当前的时间是否在安排任务的时间上来实现这个功能。如果一个设定的时间刚好通过，一个任务（一个回调函数）就会被完成。用户可以在主题和插件中利用 actions 等定时实现自己定义的函数。

开始使用安排任务需要你拥有关于 WordPress 的 hooks, actions 和 filters 的相关知识。<a href="http://www.dhblog.org/?p=892">WP-Cron插件化定义任务</a> 就简单介绍如何使用插件来使用wp-cron。对于初学者，不需要对此了解太多，比较容易上手。

<strong>2. 用插件使用WP-cron</strong>
很多插件可以查找wp-cron，我遇到的是WP-Cron Dashboard和wp-crontrol。WP-Cron Dashboard只能查看和删除WP-Cron hook，推荐使用wp-crontrol，可以添加、查看、删除，很容易控制WP-Cron。

<strong>3. wp-crontrol安装</strong>
1. 可以使用wordpress自定义的搜索插件的功能，搜索关键字:wp-crontrol
2. 也可下载后上传安装，下载地址：<a href="http://wordpress.org/extend/plugins/wp-crontrol/">http://wordpress.org/extend/plugins/wp-crontrol/</a>

<strong>4. 添加schedule(定义多长时间执行一次)</strong>
点击 设置--&gt;Crontrol。主要是添加一个定时执行的时间间隔。
<a href="http://www.dhblog.org/wp-content/uploads/2011/05/wp-crontrol1.png"><img class="aligncenter size-full wp-image-893" title="wp-crontrol1" src="http://www.dhblog.org/wp-content/uploads/2011/05/wp-crontrol11.png" alt="" width="629" height="384" /></a>
<strong>5. 添加Entry(定义hook,基于上面的schedule)</strong>
点击 工具--&gt;Crontrol。主要是添加一个hook，利用schedule中定义的间隔、每次执行的时间、执行时的参数来初始化。
<a href="http://www.dhblog.org/wp-content/uploads/2011/05/wp-crontrol2.png"><img class="aligncenter size-full wp-image-894" title="wp-crontrol2" src="http://dhblog.org/wp-content/uploads/2011/05/wp-crontrol2.png" alt="" width="586" height="408" /></a>
<strong>6. 添加定时任务</strong>
对于以上定义的hook,利用add_action将自己要执行的函数，绑定上，到时候就能够定期执行。

<p>2f3350b45f1a9eb064062a99adce3d6e104</p>


<strong>7. 删除Entry</strong>
由于系统不会自动删除hook，所以需要手动删除，利用插件wp-Crontrol在 工具–>Crontrol 即可删除自己定义hook<a href="http://www.dhblog.org/wp-content/uploads/2011/05/wp-crontrol3.png"><img class="aligncenter size-full wp-image-895" title="wp-crontrol3" src="http://www.dhblog.org/wp-content/uploads/2011/05/wp-crontrol3.png" alt="" width="650" height="160" /></a>
<strong>8. 删除schedule</strong>
同理可以在 点击 设置--&gt;Crontrol 中删除自己定义的schedule。
<a href="http://www.dhblog.org/wp-content/uploads/2011/05/wp-crontrol4.png"><img class="aligncenter size-full wp-image-896" title="wp-crontrol4" src="http://www.dhblog.org/wp-content/uploads/2011/05/wp-crontrol4.png" alt="" width="598" height="138" /></a>
</div>
</div>
<div id="post_comment">
<div id="comment"><div id="comment_title">作者：<strong>宋若愚</strong> 时间： 2011-05-12 18:57:12 </div><div id="comment_content">还有这样的插件···恩，不错</div></div><div id="comment"><div id="comment_title">作者：<strong>四二一医院</strong> 时间： 2011-05-13 09:36:51 </div><div id="comment_content">WP有个定时发布我就够了！</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-05-13 12:43:18 </div><div id="comment_content">这个要自己会写点代码才能使用，不过知道有这个东西，说明wp的强大</div></div><div id="comment"><div id="comment_title">作者：<strong>小白的博客</strong> 时间： 2011-05-13 20:53:34 </div><div id="comment_content">学习了，回访MARKING!!!</div></div><div id="comment"><div id="comment_title">作者：<strong>风的博客</strong> 时间： 2011-05-14 08:41:45 </div><div id="comment_content">这个插件不错啊！！回去用用先。。</div></div><div id="comment"><div id="comment_title">作者：<strong>Tanky Woo</strong> 时间： 2011-05-14 20:41:18 </div><div id="comment_content">顶一个，学习了！</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-05-14 21:21:39 </div><div id="comment_content">相互学习。。</div></div><div id="comment"><div id="comment_title">作者：<strong>小说排行榜</strong> 时间： 2011-05-15 14:27:23 </div><div id="comment_content">很不错 加油  啊</div></div><div id="comment"><div id="comment_title">作者：<strong>玄幻小说完本</strong> 时间： 2011-05-15 14:27:45 </div><div id="comment_content">期待你每天更新</div></div><div id="comment"><div id="comment_title">作者：<strong>小说排行榜</strong> 时间： 2011-05-15 14:32:37 </div><div id="comment_content">特地来学习了嘻嘻</div></div><div id="comment"><div id="comment_title">作者：<strong>玄幻小说完本</strong> 时间： 2011-05-15 14:33:05 </div><div id="comment_content">很不错 加油</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-05-15 22:16:45 </div><div id="comment_content">每天更新不太可能，每个礼拜更新一次吧。。。嘻嘻，谢谢鼓励。一定加油做</div></div><div id="comment"><div id="comment_title">作者：<strong>宋若愚</strong> 时间： 2011-05-16 10:26:10 </div><div id="comment_content">刚装了插件，以后我刚装了插件，以后我回复评论你能收到邮件提醒了，欢迎常来愚乐园</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-05-16 10:27:12 </div><div id="comment_content">已经添加了你博客的订阅了</div></div><div id="comment"><div id="comment_title">作者：<strong>创享生活</strong> 时间： 2011-05-29 20:28:47 </div><div id="comment_content">我感觉这种定时任务一般人很少人用到。一般有定时文章，定时备份就足够了</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-05-29 22:49:35 </div><div id="comment_content">下一篇文章是定时优化数据库。定时清理一些东西。呵呵。。。如果要自己写插件的话，需要了解一些。。</div></div><div id="comment"><div id="comment_title">作者：<strong>崔凯</strong> 时间： 2011-06-09 13:58:42 </div><div id="comment_content">试图使用这个插件每周给自己发一份邮件。

用的是Add PHP Cron Entry，直接写Hook code进去：
wp_mail('aa@bb.cc', 'Automatic email', 'Hello, mail weekly');

不知道是不是我写错了，没有成功的收到邮件。是需要加?php这样的标签吗？加了以后还是没有给自己发邮件，还是因为我的服务器不支持wp_mail？有什么方法可以定时给自己邮箱发邮件吗？</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-06-09 19:22:54 </div><div id="comment_content">主题中可以使用wp_mail函数给自己发邮件,插件中需要使用phpmailer具体使用方法见：http://www.3code.cn/wordpress-wp_mail/。</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-06-09 19:24:10 </div><div id="comment_content">检查是否支持发邮件的方法：在后台登录界面点击 “忘记密码” 操作之后看是否收到邮件</div></div><div id="comment"><div id="comment_title">作者：<strong>Steven</strong> 时间： 2012-03-12 17:39:02 </div><div id="comment_content">跪求楼主指点，小弟第一次写插件，用到这个插件，问下“6. 添加定时任务”这一步应该写在哪？
网上搜到的都没说，可能是个常识性问题，新手求指点</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2012-03-12 18:56:29 </div><div id="comment_content">这个是利用插件，不是写插件。这6个是写在funtion.php这个文件中</div></div>
</div>
</div><div id="sidebar">
<div id="contentcat">
<h3>分类目录</h3>
<ul><ul><li><a href="http://dhblog.org/archivers/cat1-1.html" title="">未分类</a> (0)</li><li><a href="http://dhblog.org/archivers/cat3-1.html" title="">信息应用</a> (4)<ul><li><a href="http://dhblog.org/archivers/cat117-1.html" title="">工具推荐</a> (4)</li><li><a href="http://dhblog.org/archivers/cat120-1.html" title="">网站设计</a> (1)<ul><li><a href="http://dhblog.org/archivers/cat126-1.html" title="">网站优化</a> (2)</li><li><a href="http://dhblog.org/archivers/cat125-1.html" title="">wordpress</a> (41)</li><li><a href="http://dhblog.org/archivers/cat123-1.html" title="">javascript</a> (8)</li><li><a href="http://dhblog.org/archivers/cat122-1.html" title="">css</a> (2)</li></ul></li></ul></li><li><a href="http://dhblog.org/archivers/cat7-1.html" title="">生活百味</a> (0)<ul><li><a href="http://dhblog.org/archivers/cat5-1.html" title="">电影赏析</a> (6)</li><li><a href="http://dhblog.org/archivers/cat118-1.html" title="">幽默故事</a> (0)</li><li><a href="http://dhblog.org/archivers/cat127-1.html" title="">活动推荐</a> (5)</li><li><a href="http://dhblog.org/archivers/cat128-1.html" title="">健康养生</a> (0)</li></ul></li><li><a href="http://dhblog.org/archivers/cat11-1.html" title="">投资理财</a> (3)</li><li><a href="http://dhblog.org/archivers/cat129-1.html" title="">信息基础</a> (0)<ul><li><a href="http://dhblog.org/archivers/cat124-1.html" title="">专业知识</a> (2)</li><li><a href="http://dhblog.org/archivers/cat121-1.html" title="">软件编程</a> (0)</li></ul></li><li><a href="http://dhblog.org/archivers/cat119-1.html" title="">时文分享</a> (0)</li></ul></ul>
</div>
<div id="contenttag">
<h3>讨论主题</h3>
<ul><li><a href="http://dhblog.org/archivers/tag130-1.html" title="">wordpress 定时任务</a> (1)</li>
<li><a href="http://dhblog.org/archivers/tag131-1.html" title="">wordpress安全</a> (9)</li>
<li><a href="http://dhblog.org/archivers/tag123-1.html" title="">javascript</a> (3)</li>
<li><a href="http://dhblog.org/archivers/tag132-1.html" title="">wordpress提高速度</a> (6)</li>
<li><a href="http://dhblog.org/archivers/tag133-1.html" title="">wordpress应用</a> (7)</li>
<li><a href="http://dhblog.org/archivers/tag134-1.html" title="">IT求职知识</a> (2)</li>
<li><a href="http://dhblog.org/archivers/tag135-1.html" title="">wordpress定时任务</a> (5)</li>
<li><a href="http://dhblog.org/archivers/tag136-1.html" title="">经验总结</a> (6)</li>
<li><a href="http://dhblog.org/archivers/tag137-1.html" title="">友情推荐</a> (7)</li>
<li><a href="http://dhblog.org/archivers/tag138-1.html" title="">域名空间</a> (1)</li>
<li><a href="http://dhblog.org/archivers/tag139-1.html" title="">拿福能</a> (2)</li>
<li><a href="http://dhblog.org/archivers/tag140-1.html" title="">wordpress主题</a> (7)</li>
<li><a href="http://dhblog.org/archivers/tag141-1.html" title="">wordpress ajax</a> (8)</li>
<li><a href="http://dhblog.org/archivers/tag143-1.html" title="">wordpress数据库</a> (1)</li>
<li><a href="http://dhblog.org/archivers/tag145-1.html" title="">迅雷下载</a> (3)</li>
<li><a href="http://dhblog.org/archivers/tag147-1.html" title="">BT下载</a> (1)</li>
<li><a href="http://dhblog.org/archivers/tag148-1.html" title="">数据库</a> (1)</li>
<li><a href="http://dhblog.org/archivers/tag149-1.html" title="">网络赚钱</a> (1)</li>
</ul>
</div>
</div><div id="footer">
<script language="javascript" type="text/javascript" src="http://js.users.51.la/4836371.js"></script>
<noscript><a href="http://www.51.la/?4836371" target="_blank"></a></noscript>
Powered by <strong><a href="http://dhblog.org" target="_blank">dhblog</a></strong> &nbsp;&copy;<a href="http://dhblog.org" target="_blank" title="DH博客">DH</a>
</div>
</div>
</body>
</html>