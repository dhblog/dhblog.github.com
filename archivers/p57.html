<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>wordpress ajax之六:评论表情动态加载 - Powered by dhblog.org</title>
<meta name="keywords" content="wordpress ajax之六:评论表情动态加载" />
<meta name="description" content="wordpress ajax之六:评论表情动态加载,静态页面,Powered by dhblog.org" />
<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
<div id="wrapper">
<div id="nav">
<ul><li><a href="p19.html" title="给我留言">给我留言</a></li>
<li><a href="p20.html" title="友情链接">友情链接</a></li>
<li><a href="p21.html" title="关于本站">关于本站</a></li>
<li><a href="p22.html" title="本站下载">本站下载</a></li>
<li><a href="p39.html" title="google搜索结果">google搜索结果</a></li>
</ul>
</div>
<div id="top">
<div id="dhtitle">DH 博客的文章归档</div>
<center>DH出品，必属精品！</center>
  <div style="text-align:right;">
	<a href="http://dhblog.org">原始版本</a>
  </div>  
</div><div id="nav">
<a href="http://dhblog.org/archivers/"><strong>DH 博客</strong></a>  &raquo; <a href="http://dhblog.org/archivers/cat125-1.html">wordpress</a>  &raquo; wordpress ajax之六:评论表情动态加载
| <a href="http://dhblog.org/57.html"><strong>查看此文章的完整的版本</strong></a>
</div>
<div id="content">
<div id="post_content">
<div id="post_title">wordpress ajax之六:评论表情动态加载</div>
<div id="post_author">2011-09-19 07:00:30</div>
<div>
<h2>1 序言</h2>
上一遍讲到利用一个简单的例子说明了如何<a href="http://dhblog.org/archives/9.html">使用简单的ajax</a>。这里说明一个应用：评论表情动态加载。什么是表情动态加载呢?就是文章页面不加载表情，节省带宽，要知道加载很多表情符号，很费力的，在用户点击评论框之后，才动态加载表情，这样针对性更强，加快页面的转载速度。其效果就是点击评论框试试。效果如图：
<a href="http://dhblog.org/wp-content/uploads/2011/09/biaoqing.png"><img src="http://dhblog.org/wp-content/uploads/2011/09/biaoqing.png" alt="表情动态加载" title="biaoqing" width="629" height="355" class="aligncenter size-full wp-image-59" /></a>
这个例子不仅仅讲诉的是表情分页的问题，代码中还告诉大家dhchannel主题如何写出自定义表情符号。

<h2>2 需要的元素</h2>
和上篇讲到的一样，元素包括：
1. jquery.js，下载地址为:http://ajax.googleapis.com/ajax/libs/jquery/1.2.3/jquery.min.js
2. 定义的js文件，规定请求的动作，和接受数据之后的动作 smiley_ajax.js
3. 定义点击评论框的操作smiley_ajax.php
4. 表情显示和点击显示符号的页面 smiley.php
5. 如果需要自己定义自己的表情，需要修改wp-includes\images\smilies的表情为自己的哦
6. 表情符号定义的需要的页面 smiley_settings.php

元素的位置：
1. jquery.js在header.php中包含

<p>2f3350b45f1a9eb064062a99adce3d6e027</p>


2.把自己定义的js保存为smiley_ajax.js,同样在header.php中包含

<p>2f3350b45f1a9eb064062a99adce3d6e028</p>


3. 定义点击评论框的操作smiley_ajax.php
放在主题下面即可，我是放在自己建立的functions/目录下
4. 表情显示和点击显示符号的页面 smiley.php
放在主题下面即可，我是放在自己建立的functions/目录下
5. 如果需要自己定义自己的表情，需要修改wp-includes\images\smilies的表情为自己的哦
这个自己到网上去找一写主题的表情哦
6. 表情符号定义的需要的页面 smiley_settings.php
放在主题下面即可，我是放在自己建立的functions/目录下

<h2>3 例子的运行情况</h2>
具体可以参考<a href="http://dhblog.org">我的博客</a>的评论效果。

<h2>4 smiley.php</h2>
将一下保存为smiley.php文件

<p>2f3350b45f1a9eb064062a99adce3d6e029</p>


注意自己保存的表情文件需要和以上的同名！！

<h2>5 smiley_settings.php</h2>
此文件和上面的smiley.php对应，规定哪些表情使用wp-includes\images\smilies中的哪个文件

<p>2f3350b45f1a9eb064062a99adce3d6e030</p>


在functions.php中需要引用这个文件

<p>2f3350b45f1a9eb064062a99adce3d6e031</p>



<h2>6 js部分</h2>
下面的代码保存为 smiley_ajax.js文件，放到模板里面，记得在header.php中包含哦

<p>2f3350b45f1a9eb064062a99adce3d6e032</p>



<h2>7 smiley_ajax.php</h2>
js调用后台的函数应该这样写

<p>2f3350b45f1a9eb064062a99adce3d6e033</p>



<h2>8 comment.php的小小改动</h2>
comment.php需要告诉js，在哪个地方放表情哦。在合适的地方放上以下的代码，就会在哪里显示表情。

<p>2f3350b45f1a9eb064062a99adce3d6e034</p>


在functions.php中需要引用这个文件

<p>2f3350b45f1a9eb064062a99adce3d6e035</p>



<h2>7 寄语</h2>
希望大家成功
</div>
</div>
<div id="post_comment">
<div id="comment"><div id="comment_title">作者：<strong>米多</strong> 时间： 2011-09-19 07:07:13 </div><div id="comment_content">看了DH的博客，我励志学一点预言，免得和白痴一样</div></div><div id="comment"><div id="comment_title">作者：<strong>赤血红涯</strong> 时间： 2011-09-19 09:04:16 </div><div id="comment_content">这个要这么麻烦呀。</div></div><div id="comment"><div id="comment_title">作者：<strong>动漫T恤</strong> 时间： 2011-09-19 09:22:04 </div><div id="comment_content">看不太懂</div></div><div id="comment"><div id="comment_title">作者：<strong>Bin</strong> 时间： 2011-09-19 10:43:39 </div><div id="comment_content">[奸笑] 看看图片在你这边显示的效果如何，嘻嘻。</div></div><div id="comment"><div id="comment_title">作者：<strong>盈丰国际</strong> 时间： 2011-09-19 12:27:11 </div><div id="comment_content">周一过来支持了~</div></div><div id="comment"><div id="comment_title">作者：<strong>hostgator</strong> 时间： 2011-09-19 14:51:29 </div><div id="comment_content">博主写的不错。支持一下</div></div><div id="comment"><div id="comment_title">作者：<strong>短笑话</strong> 时间： 2011-09-19 15:42:38 </div><div id="comment_content">节省带宽</div></div><div id="comment"><div id="comment_title">作者：<strong>灰指甲的治疗方法</strong> 时间： 2011-09-19 15:43:28 </div><div id="comment_content">不太懂技术</div></div><div id="comment"><div id="comment_title">作者：<strong>iSayme</strong> 时间： 2011-09-19 15:52:05 </div><div id="comment_content">教程 教程 喜欢 [很酷]</div></div><div id="comment"><div id="comment_title">作者：<strong>葉少</strong> 时间： 2011-09-19 16:17:30 </div><div id="comment_content">可惜不用WP，只能了解下了</div></div><div id="comment"><div id="comment_title">作者：<strong>足球比分</strong> 时间： 2011-09-19 17:44:52 </div><div id="comment_content">不怎么懂~</div></div><div id="comment"><div id="comment_title">作者：<strong>易众游戏网仙OL专区</strong> 时间： 2011-09-19 17:47:13 </div><div id="comment_content">支持来啦！！！！！！！！！！</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-19 20:39:27 </div><div id="comment_content">谢谢。我就是把我怎么搞博客的写出来而已。呵呵</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-19 20:39:51 </div><div id="comment_content">其实不是很麻烦，可能我写的麻烦了，包括自定义的表情这个部分</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-19 20:40:17 </div><div id="comment_content">那个图片？</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-19 20:41:36 </div><div id="comment_content">呵呵，这个我觉得还可以，减少加载时间</div></div><div id="comment"><div id="comment_title">作者：<strong>Bin</strong> 时间： 2011-09-19 21:57:44 </div><div id="comment_content">呵呵，指的就是表情的图片在留言部分的显示效果。发现显示效果不错，我有试过也叠加到自己的博客里头，后来发现放上去之后，发现不是很满意（美术功底没有，呵呵），就没继续下去了。</div></div><div id="comment"><div id="comment_title">作者：<strong>shine</strong> 时间： 2011-09-20 08:16:26 </div><div id="comment_content">谢谢分享  来学习学习</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-20 08:31:33 </div><div id="comment_content">网上下的。这个是qq的表情符号。呵呵，还有很多其他的表情可以选择的。但是表情符号比较大，而且很多，所以动态加载比较好，页面加载会比较快。</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-20 08:32:41 </div><div id="comment_content">其实我也有一段时间想放弃wordpress的，看看它的定制性和支持还不错。就使用了，然后就一发不可收拾了。我以为你的博客意识wp的。</div></div><div id="comment"><div id="comment_title">作者：<strong>家居加盟</strong> 时间： 2011-09-20 14:07:55 </div><div id="comment_content">没有怎么明白</div></div><div id="comment"><div id="comment_title">作者：<strong>九阳豆浆机</strong> 时间： 2011-09-20 17:58:13 </div><div id="comment_content">这个不怎么懂。。。。</div></div><div id="comment"><div id="comment_title">作者：<strong>walfred</strong> 时间： 2011-09-21 12:00:16 </div><div id="comment_content">我的都没有评论表情这个，唉，想的多了，用户用的却不多</div></div><div id="comment"><div id="comment_title">作者：<strong>seo顾问</strong> 时间： 2011-09-21 12:06:58 </div><div id="comment_content">呵呵，感觉你那个弹出的AD很给力</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-21 12:45:01 </div><div id="comment_content">这个是图片广告。这个点击率很少，所以我想把这个撤掉了。</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-21 12:45:20 </div><div id="comment_content">用的不错。但是还是有一些会用的。</div></div><div id="comment"><div id="comment_title">作者：<strong>结婚吧</strong> 时间： 2011-09-21 15:46:21 </div><div id="comment_content">有点复杂，看不大懂的。</div></div><div id="comment"><div id="comment_title">作者：<strong>牛初乳哪个牌子好</strong> 时间： 2011-09-21 17:43:24 </div><div id="comment_content">文章不错哦，支持博主了~~</div></div><div id="comment"><div id="comment_title">作者：<strong>婚纱摄影</strong> 时间： 2011-09-21 20:29:52 </div><div id="comment_content">博主太专业了，能不能加个好友呀！</div></div><div id="comment"><div id="comment_title">作者：<strong>姜敏</strong> 时间： 2011-09-21 21:05:40 </div><div id="comment_content">兄弟对ajax是情有独钟呀</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-22 08:34:30 </div><div id="comment_content">那里加好友呢？</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-22 08:35:09 </div><div id="comment_content">是要搞就搞彻底了。而且很多都是衍生出来的。搞的多了，就比较容易了。</div></div><div id="comment"><div id="comment_title">作者：<strong>康明眼镜</strong> 时间： 2011-09-22 09:58:48 </div><div id="comment_content">这个用户体验不错</div></div><div id="comment"><div id="comment_title">作者：<strong>净水器</strong> 时间： 2011-09-22 13:45:02 </div><div id="comment_content">java比PHP感觉还要难。。。</div></div><div id="comment"><div id="comment_title">作者：<strong>七七</strong> 时间： 2011-09-22 21:01:04 </div><div id="comment_content">来了解下，效果应该不错！</div></div><div id="comment"><div id="comment_title">作者：<strong>pba</strong> 时间： 2011-09-22 22:39:20 </div><div id="comment_content">我的博客评论没有表情的呵呵</div></div><div id="comment"><div id="comment_title">作者：<strong>手机软件</strong> 时间： 2011-09-23 09:16:22 </div><div id="comment_content">做个人博客， 必须用wp，我是钟爱啊。。。</div></div><div id="comment"><div id="comment_title">作者：<strong>乱了感觉</strong> 时间： 2011-09-23 09:21:19 </div><div id="comment_content">我觉得表情动态加载没什么必要，直接显示也没什么不好的</div></div><div id="comment"><div id="comment_title">作者：<strong>滨州房产网</strong> 时间： 2011-09-23 09:56:35 </div><div id="comment_content">这个很是不错啊 对于用户体验帮助很大</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-23 12:55:32 </div><div id="comment_content">我自己定义的表情，由于图片比较大，而且比较多，对加载的速度不利，所以选择分步加载。</div></div><div id="comment"><div id="comment_title">作者：<strong>进口红酒</strong> 时间： 2011-09-23 12:59:14 </div><div id="comment_content">很好，很不错 [鄙视]</div></div><div id="comment"><div id="comment_title">作者：<strong>邓肯</strong> 时间： 2011-09-23 20:29:26 </div><div id="comment_content">额 最近都在研究AJAX嘛  可以出教材了</div></div><div id="comment"><div id="comment_title">作者：<strong>康明眼镜</strong> 时间： 2011-09-24 10:01:42 </div><div id="comment_content">这个功能不错</div></div><div id="comment"><div id="comment_title">作者：<strong>银屑病的症状</strong> 时间： 2011-09-24 10:35:59 </div><div id="comment_content">来看你了 不错</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-24 13:30:33 </div><div id="comment_content">呵呵。只是一个功能的若干种用法。还不足以出教材</div></div><div id="comment"><div id="comment_title">作者：<strong>秦天SEO</strong> 时间： 2011-09-24 14:29:17 </div><div id="comment_content">呵呵，不错的效果！谢谢分享！</div></div><div id="comment"><div id="comment_title">作者：<strong>流氓兔</strong> 时间： 2011-09-24 15:28:27 </div><div id="comment_content">纯技术的的博文，不敢乱评价！！</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-24 18:18:57 </div><div id="comment_content">为何不敢呢？随便说说。呵呵</div></div><div id="comment"><div id="comment_title">作者：<strong>sailor</strong> 时间： 2011-09-24 23:11:20 </div><div id="comment_content">这个方法不错，我的现在都是直接加载的，改天研究成这种方法，节省我那点流量</div></div><div id="comment"><div id="comment_title">作者：<strong>第八博客</strong> 时间： 2011-09-25 10:18:53 </div><div id="comment_content">还是不用表情了

显得干净利索</div></div><div id="comment"><div id="comment_title">作者：<strong>笔记本电脑</strong> 时间： 2011-09-25 11:24:48 </div><div id="comment_content">这个功能，，表示喜欢。。</div></div><div id="comment"><div id="comment_title">作者：<strong>葉少</strong> 时间： 2011-09-25 11:38:31 </div><div id="comment_content">真心的不错</div></div><div id="comment"><div id="comment_title">作者：<strong>网上淘金</strong> 时间： 2011-09-25 12:23:26 </div><div id="comment_content">分享的很有道理 收藏了</div></div><div id="comment"><div id="comment_title">作者：<strong>自动焊接专机</strong> 时间： 2011-09-26 15:50:18 </div><div id="comment_content">恩，不错</div></div><div id="comment"><div id="comment_title">作者：<strong>我的移动互联</strong> 时间： 2011-09-27 22:11:00 </div><div id="comment_content">wp技术不懂，但表情的图片在多彩点就好（纯属个人喜好哈）。</div></div><div id="comment"><div id="comment_title">作者：<strong>就是爱玩</strong> 时间： 2011-09-27 22:40:44 </div><div id="comment_content">博主牛人，不过这些都有插件实现吧</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-28 09:16:56 </div><div id="comment_content">呵呵。其中有很多事爱好技术</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-28 09:17:37 </div><div id="comment_content">我偏偏喜欢用代码，然后继承到主题，做到0插件</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-09-28 09:22:23 </div><div id="comment_content">谢谢。不过这个测试都很费时间。</div></div><div id="comment"><div id="comment_title">作者：<strong>陌生情侣博客</strong> 时间： 2011-10-02 10:21:55 </div><div id="comment_content">折腾这 还是蛮累的。 我折腾差不多就停了。</div></div><div id="comment"><div id="comment_title">作者：<strong>奚少</strong> 时间： 2011-10-17 16:54:45 </div><div id="comment_content">我只是做一个hide，看来可以这样改进一下了 [大笑]</div></div><div id="comment"><div id="comment_title">作者：<strong>IT圈中人</strong> 时间： 2011-10-27 20:47:27 </div><div id="comment_content">恩，看到你的效果了，挺好的。 [渴望]</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-10-29 11:17:33 </div><div id="comment_content">这样其实有点动画的效果。评论着体验好一线。</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-10-29 11:18:10 </div><div id="comment_content">是的。到了就休息一下。我休息了快一个月了。主要是其他的事情多，没有时间折腾。</div></div><div id="comment"><div id="comment_title">作者：<strong>DH</strong> 时间： 2011-10-29 11:23:44 </div><div id="comment_content">呵呵。希望给大家一点启示，弄出更好地效果。</div></div>
</div>
</div><div id="sidebar">
<div id="contentcat">
<h3>分类目录</h3>
<ul><ul><li><a href="http://dhblog.org/archivers/cat1-1.html" title="">未分类</a> (0)</li><li><a href="http://dhblog.org/archivers/cat3-1.html" title="">信息应用</a> (4)<ul><li><a href="http://dhblog.org/archivers/cat117-1.html" title="">工具推荐</a> (4)</li><li><a href="http://dhblog.org/archivers/cat120-1.html" title="">网站设计</a> (1)<ul><li><a href="http://dhblog.org/archivers/cat126-1.html" title="">网站优化</a> (2)</li><li><a href="http://dhblog.org/archivers/cat125-1.html" title="">wordpress</a> (41)</li><li><a href="http://dhblog.org/archivers/cat123-1.html" title="">javascript</a> (8)</li><li><a href="http://dhblog.org/archivers/cat122-1.html" title="">css</a> (2)</li></ul></li></ul></li><li><a href="http://dhblog.org/archivers/cat7-1.html" title="">生活百味</a> (0)<ul><li><a href="http://dhblog.org/archivers/cat5-1.html" title="">电影赏析</a> (6)</li><li><a href="http://dhblog.org/archivers/cat118-1.html" title="">幽默故事</a> (0)</li><li><a href="http://dhblog.org/archivers/cat127-1.html" title="">活动推荐</a> (5)</li><li><a href="http://dhblog.org/archivers/cat128-1.html" title="">健康养生</a> (0)</li></ul></li><li><a href="http://dhblog.org/archivers/cat11-1.html" title="">投资理财</a> (3)</li><li><a href="http://dhblog.org/archivers/cat129-1.html" title="">信息基础</a> (0)<ul><li><a href="http://dhblog.org/archivers/cat124-1.html" title="">专业知识</a> (2)</li><li><a href="http://dhblog.org/archivers/cat121-1.html" title="">软件编程</a> (0)</li></ul></li><li><a href="http://dhblog.org/archivers/cat119-1.html" title="">时文分享</a> (0)</li></ul></ul>
</div>
<div id="contenttag">
<h3>讨论主题</h3>
<ul><li><a href="http://dhblog.org/archivers/tag130-1.html" title="">wordpress 定时任务</a> (1)</li>
<li><a href="http://dhblog.org/archivers/tag131-1.html" title="">wordpress安全</a> (9)</li>
<li><a href="http://dhblog.org/archivers/tag123-1.html" title="">javascript</a> (3)</li>
<li><a href="http://dhblog.org/archivers/tag132-1.html" title="">wordpress提高速度</a> (6)</li>
<li><a href="http://dhblog.org/archivers/tag133-1.html" title="">wordpress应用</a> (7)</li>
<li><a href="http://dhblog.org/archivers/tag134-1.html" title="">IT求职知识</a> (2)</li>
<li><a href="http://dhblog.org/archivers/tag135-1.html" title="">wordpress定时任务</a> (5)</li>
<li><a href="http://dhblog.org/archivers/tag136-1.html" title="">经验总结</a> (6)</li>
<li><a href="http://dhblog.org/archivers/tag137-1.html" title="">友情推荐</a> (7)</li>
<li><a href="http://dhblog.org/archivers/tag138-1.html" title="">域名空间</a> (1)</li>
<li><a href="http://dhblog.org/archivers/tag139-1.html" title="">拿福能</a> (2)</li>
<li><a href="http://dhblog.org/archivers/tag140-1.html" title="">wordpress主题</a> (7)</li>
<li><a href="http://dhblog.org/archivers/tag141-1.html" title="">wordpress ajax</a> (8)</li>
<li><a href="http://dhblog.org/archivers/tag143-1.html" title="">wordpress数据库</a> (1)</li>
<li><a href="http://dhblog.org/archivers/tag145-1.html" title="">迅雷下载</a> (3)</li>
<li><a href="http://dhblog.org/archivers/tag147-1.html" title="">BT下载</a> (1)</li>
<li><a href="http://dhblog.org/archivers/tag148-1.html" title="">数据库</a> (1)</li>
<li><a href="http://dhblog.org/archivers/tag149-1.html" title="">网络赚钱</a> (1)</li>
</ul>
</div>
</div><div id="footer">
<script language="javascript" type="text/javascript" src="http://js.users.51.la/4836371.js"></script>
<noscript><a href="http://www.51.la/?4836371" target="_blank"></a></noscript>
Powered by <strong><a href="http://dhblog.org" target="_blank">dhblog</a></strong> &nbsp;&copy;<a href="http://dhblog.org" target="_blank" title="DH博客">DH</a>
</div>
</div>
</body>
</html>